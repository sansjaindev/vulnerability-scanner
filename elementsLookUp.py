
from selenium.webdriver import Chrome
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
from selenium.webdriver.common.by import By
from selenium.common.exceptions import TimeoutException, NoSuchElementException
import requests

def locate_elements(website_url):
	try:
		driver = Chrome()
		driver.get(website_url)

		try:
			username_element = WebDriverWait(driver, 10).until(EC.presence_of_element_located((By.XPATH, """
																					  //input[(@type='email' or @type='text') and 
																					  (contains(@id, 'email') or contains(@id, 'user') or contains(@id, 'id') or 
																					  contains(@class, 'email') or contains(@class, 'user') or contains(@class, 'id') or 
																					  contains(@name, 'email') or contains(@name, 'user') or contains(@name, 'id') or 
																					  contains(@autocomplete, 'email') or contains(@autocomplete, 'user') or contains(@autocomplete, 'id') or 
																					  contains(@placeholder, 'email') or contains(@placeholder, 'user') or contains(@placeholder, 'id'))]""")))
			password_element = WebDriverWait(driver, 10).until(EC.presence_of_element_located((By.XPATH, f"//input[(@type='password')]")))
			
			form_element = WebDriverWait(driver, 10).until(EC.element_to_be_clickable((By.XPATH, """//form[@method='post']""")))
			try:
				submit_button = form_element.find_element(By.XPATH, """//button[@type='submit']""")
			except NoSuchElementException:
				try:
					submit_button = form_element.find_element(By.XPATH, """//input[
											   contains(translate(text(), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'), 'sign in') or 
											   contains(translate(text(), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'), 'login') or 
											   contains(translate(@value, 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'), 'login') or 
											   contains(translate(@value, 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'), 'sign in')]""")
				
				except NoSuchElementException:
					submit_button = form_element.find_element(By.XPATH, """//input[@type='submit']""")

		except TimeoutException:
			pass
	
	except requests.exceptions.RequestException:
		result = "Error: Unable to connect to the website"
		return result

	return username_element, password_element, submit_button, driver
